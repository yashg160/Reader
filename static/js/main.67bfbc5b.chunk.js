(this["webpackJsonpreader-react"]=this["webpackJsonpreader-react"]||[]).push([[0],{106:function(e,t,a){e.exports=a(119)},111:function(e,t,a){},119:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(12),o=a.n(i),s=(a(111),a(16)),l=a(17),c=a(19),u=a(18),d=a(20),m=a(75),g=a(38),h=a(6),p=a.n(h),f=a(10),y=a(166),E=a(167),v=a(82),b=a(168),k=a(190),x=a(39),S=a.n(x),w=a(169),C=a(160),j=a(187),T=a(170),A=a(176),I=a(172),R=a(173),O=a(171),M=a(164),N=a(188),L=a(81),z=a.n(L),B=a(177),P=a(92),D=a(165),U=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{marginTop:100}},r.a.createElement(C.a,{variant:"middle"}),r.a.createElement(v.a,{align:"center",variant:"body1",style:{marginTop:40,marginBottom:40}},"Reader blog app. Created by Yash Gupta November 2019."))}}]),t}(r.a.PureComponent),W=a(15),_=a.n(W),F=a(11),G=a.n(F),H=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={loading:!0,dialogLoading:!1,error:!1,getStartedDialog:!1,signInDialog:!1,emailError:!1,emailErrorMessage:"",passwordError:!1,passwordErrorMessage:"",getStartedEmail:"",getStartedPassword:"",signInEmail:"",signInPassword:"",errorSnackbar:!1,successSnackbar:!1},e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"validateEmail",value:function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(/\S+@\S+\.\S+/.test(t)){e.next=3;break}throw Error("ERR_EMAIL");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"validatePassword",value:function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(/(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,}/.test(t)){e.next=3;break}throw Error("ERR_PASSWORD");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"insertUserIntoTable",value:function(){var e=Object(f.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(_.a+"/users/signup",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:this.state.getStartedEmail,password:this.state.getStartedPassword})});case 2:return t=e.sent,e.next=5,t.json();case 5:if(a=e.sent,console.log(a),!a.error||"ERR_DUP_ENTRY"!=a.errorMessage){e.next=11;break}throw Error("ERR_DUP_ENTRY");case 11:if(!a.error){e.next=13;break}throw Error("ERR_UNKNOWN");case 13:n=a.user,G.a.set("userId",n.id,{expires:7}),G.a.set("userAuthenticated",n.authenticated,{expires:7}),G.a.set("profileComplete",!1,{expires:7});case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleGetStartedClick",value:function(){var e=this;console.log("Called handleGetStartedClick",this.state),this.setState({dialogLoading:!0,error:!1,emailError:!1,passwordError:!1,emailErrorMessage:""}),this.validateEmail(this.state.getStartedEmail).then((function(){return e.validatePassword(e.state.getStartedPassword)})).then((function(){return e.insertUserIntoTable()})).then((function(){console.log("User created successfully. Will proceed to next screen"),e.setState({dialogLoading:!1,getStartedDialog:!1,successSnackbar:!0}),e.props.history.push("/profile")})).catch((function(t){console.error(t),e.setState({errorSnackbar:!0}),"ERR_EMAIL"==t.message?e.setState({dialogLoading:!1,emailError:!0,emailErrorMessage:"Invalid Email"}):"ERR_PASSWORD"==t.message?e.setState({dialogLoading:!1,passwordError:!0}):"ERR_DUP_ENTRY"==t.message?e.setState({dialogLoading:!1,emailError:!0,emailErrorMessage:"Email already registered"}):e.setState({dialogLoading:!1})}))}},{key:"findUser",value:function(){var e=Object(f.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(_.a+"/users/signin?email=".concat(this.state.signInEmail,"&password=").concat(this.state.signInPassword),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:if(a=e.sent,console.log(a),!a.error){e.next=9;break}throw Error(a.errorMessage);case 9:n=a.user,G.a.set("userId",n.id,{expires:7}),G.a.set("userAuthenticated",n.authenticated,{expires:7}),G.a.set("profileComplete",!1);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleSignInClick",value:function(){var e=this;console.log("Called handleSignInClick"),this.setState({dialogLoading:!0,error:!1,emailError:!1,passwordError:!1,emailErrorMessage:"",passwordErrorMessage:""});var t=this.state.signInEmail;this.validateEmail(t).then((function(){return e.findUser()})).then((function(){console.log("Email and password were correct. Will proceed to next screen"),e.setState({dialogLoading:!1,signInDialog:!1,successSnackbar:!0}),e.props.history.push("/dashboard")})).catch((function(t){console.error(t),e.setState({errorSnackbar:!0}),"ERR_EMAIL"==t.message?e.setState({dialogLoading:!1,emailError:!0,emailErrorMessage:"Invalid Email"}):"ERR_SERVER"==t.message||"ERR_DUP_ACC"==t.message?e.setState({dialogLoading:!1}):"ERR_USER_EXISTS"==t.message?e.setState({dialogLoading:!1,emailError:!0,emailErrorMessage:"No such account exists"}):"ERR_PASSWORD"==t.message?e.setState({dialogLoading:!1,passwordError:!0,passwordErrorMessage:"Incorrect password. Try again"}):e.setState({dialogLoading:!1})}))}},{key:"componentDidMount",value:function(){var e=G.a.get("userAuthenticated"),t=G.a.get("profileComplete");console.log("Cookie userAuthenticated: ",e),e&&t?this.props.history.push("/dashboard"):t||this.props.history.push("/profile"),this.setState({loading:!1})}},{key:"render",value:function(){var e=this,t=Object(P.a)({palette:{primary:{main:"#673ab7"},secondary:{light:"#828282",main:"#000",contrastText:"#fff"}},typography:{fontFamily:"Nunito"}});return this.state.loading?r.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:200}},r.a.createElement(M.a,{variant:"indeterminate",color:"secondary",size:40})):r.a.createElement(D.a,{theme:t},r.a.createElement("div",null,r.a.createElement(y.a,{position:"sticky",style:{backgroundColor:"white"}},r.a.createElement(E.a,{style:{paddingLeft:80,paddingRight:80}},r.a.createElement(v.a,{variant:"h6",style:{flex:1,color:"black"},onClick:function(){return e.props.history.push("/dashboard")}},"Reader"),r.a.createElement(b.a,{color:"default",style:{textTransform:"capitalize",fontSize:18}},"Write"),r.a.createElement(b.a,{color:"default",style:{marginRight:10,textTransform:"capitalize",fontSize:18},onClick:function(){return e.setState({signInDialog:!0})}},"Sign In"),r.a.createElement(b.a,{variant:"contained",color:"primary",style:{marginLeft:10,paddingTop:10,paddingBottom:10,paddingRight:20,paddingLeft:20,textTransform:"capitalize",fontSize:18},onClick:function(){return e.setState({getStartedDialog:!0})}},"Get Started"))),r.a.createElement("div",{style:{marginLeft:120,marginRight:120}},r.a.createElement(v.a,{align:"center",variant:"h1",style:{marginTop:80}},"Read about what matters to you"),r.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexWrap:"wrap",marginTop:40,marginBottom:40}},["Entertainment","Faishon","Finance","Fitness","Relationship","Technology"].map((function(e){return r.a.createElement(k.a,{color:"secondary",icon:r.a.createElement(S.a,{color:"primary",fontSize:"large"}),label:r.a.createElement(v.a,{variant:"h6"},e),style:{margin:16,padding:32,borderRadius:32,boxShadow:"4px 4px 4px 4px rgba(0,0,0,0.4)"}})}))),r.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginLeft:"auto",marginRight:"auto",marginTop:40,marginBottom:40}},r.a.createElement(v.a,{variant:"h5",align:"center"},"We offer a wide range of topics. Read anything you want.")),r.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginLeft:"auto",marginRight:"auto",marginTop:40}},r.a.createElement(b.a,{variant:"contained",color:"primary",style:{paddingTop:20,paddingBottom:20,paddingLeft:100,paddingRight:100,textTransform:"capitalize",fontSize:24,borderRadius:30,boxShadow:"4px 4px 4px 4px rgba(0,0,0,0.2)"}},"Get Started")),r.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginLeft:"auto",marginRight:"auto",marginTop:20,marginBottom:80}},r.a.createElement(v.a,{variant:"body1",align:"center",style:{fontSize:20}},"Already have an account? ",r.a.createElement(m.b,{to:"#"},"Sign In"))),r.a.createElement(C.a,{variant:"middle",style:{marginTop:100,marginBottom:100,height:"4px",marginLeft:"auto",marginRight:"auto"}}),r.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexWrap:"wrap",marginTop:100,marginBottom:40}},r.a.createElement(k.a,{color:"primary",variant:"outlined",icon:r.a.createElement(S.a,{fontSize:"large"}),label:r.a.createElement(v.a,{variant:"h6"},"Many Topics"),style:{margin:16,padding:32,borderRadius:32,boxShadow:"2px rgba(0,0,0,0.6)"}}),r.a.createElement(k.a,{color:"primary",variant:"outlined",icon:r.a.createElement(S.a,{fontSize:"large"}),label:r.a.createElement(v.a,{variant:"h6"},"Free Reading"),style:{margin:16,padding:32,borderRadius:32}}),r.a.createElement(k.a,{color:"primary",variant:"outlined",icon:r.a.createElement(S.a,{fontSize:"large"}),label:r.a.createElement(v.a,{variant:"h6"},"Free Writing"),style:{margin:16,padding:32,borderRadius:32}}),r.a.createElement(k.a,{icon:r.a.createElement(S.a,{fontSize:"large"}),label:r.a.createElement(v.a,{variant:"h5"},"On Reader, all for you."),style:{margin:20,padding:36,borderRadius:36,backgroundColor:"transparent"}})),r.a.createElement("div",{style:{marginTop:120,marginBottom:40}},r.a.createElement(v.a,{variant:"h2"},"No ads. Ever."),r.a.createElement(v.a,{variant:"h6"},"We don't sell your data or target you with ads.")),r.a.createElement(w.a,{container:!0,direction:"row",style:{marginTop:100,marginBottom:100}},r.a.createElement(w.a,{container:!0,item:!0,alignItems:"center",justify:"center",xs:12,md:6},r.a.createElement(b.a,{variant:"contained",color:"primary",style:{paddingTop:20,paddingBottom:20,paddingLeft:100,paddingRight:100,fontSize:24,textTransform:"capitalize",borderRadius:30,boxShadow:"4px 4px 4px 4px rgba(0,0,0,0.2)"}},"Get Started")),r.a.createElement(w.a,{container:!0,item:!0,alignItems:"center",justify:"center",xs:12,md:6},r.a.createElement(v.a,{variant:"h4",align:"center"},"We are different than others"),r.a.createElement(v.a,{variant:"body1",align:"center",style:{marginTop:40,fontSize:20}},"Reader is not like any other platform on the internet. Our sole purpose is to help you find compelling ideas, knowledge, and perspectives. We don\u2019t serve ads\u2014we serve you, the curious reader who loves to learn new things. Reader is home to thousands of independent voices, and we combine humans and technology to find the best reading for you\u2014and filter out the rest."))),r.a.createElement(C.a,{variant:"middle",style:{marginTop:100,marginBottom:100,height:"4px",marginLeft:"auto",marginRight:"auto"}}),r.a.createElement("div",{style:{marginTop:80,marginBottom:80}},r.a.createElement(v.a,{align:"center",variant:"h1",style:{marginTop:20}},"Expand your reading."),r.a.createElement(v.a,{align:"center",variant:"h1",style:{marginTop:20,marginBottom:20}},"Expand your mind."))),r.a.createElement(U,null),r.a.createElement(T.a,{open:this.state.getStartedDialog,onClose:function(){return e.setState({getStartedDialog:!1})},onExited:function(){return e.setState({emailError:!1,emailErrorMessage:"",passwordError:!1,passwordErrorMessage:""})},"aria-labelledby":"form-dialog-title"},r.a.createElement(w.a,{container:!0,direction:"column",align:"center",justify:"center"},r.a.createElement(w.a,{item:!0,xs:12},r.a.createElement(O.a,{id:"form-dialog-title"},"Get Started")),r.a.createElement(w.a,{item:!0,xs:12},r.a.createElement(I.a,null,r.a.createElement(R.a,{style:{display:"flex",margin:"auto",justifyContent:"center",alignItems:"center"}},"You need an account to read and write blogs. Please enter a valid email and a password. Your password is safe with us. We promise."),r.a.createElement(j.a,{autoFocus:!0,margin:"dense",id:"email-getstarted",label:"Email",type:"email",fullWidth:!0,error:this.state.emailError,helperText:this.state.emailErrorMessage,disabled:this.state.dialogLoading,onChange:function(t){return e.setState({getStartedEmail:t.target.value})}}),r.a.createElement(j.a,{margin:"dense",id:"password-getstarted",label:"Password",type:"password",fullWidth:!0,error:this.state.passwordError,disabled:this.state.dialogLoading,onChange:function(t){return e.setState({getStartedPassword:t.target.value})},helperText:"At least 6 characters, one uppercase and one lowercase"})))),r.a.createElement(A.a,null,r.a.createElement(b.a,{onClick:function(){return e.setState({getStartedDialog:!1})},variant:"text",color:"default",style:{textTransform:"capitalize",fontSize:18}},"Cancel"),this.state.dialogLoading?r.a.createElement(M.a,{color:"primary",size:24,variant:"indeterminate",style:{marginLeft:40,marginRight:40}}):r.a.createElement(b.a,{onClick:function(){return e.handleGetStartedClick()},variant:"contained",color:"primary",style:{textTransform:"capitalize",color:"white",fontSize:18,padding:10}},"Sign Up"))),r.a.createElement(T.a,{open:this.state.signInDialog,onClose:function(){return e.setState({signInDialog:!1})},onExited:function(){return e.setState({emailError:!1,emailErrorMessage:"",passwordError:!1,passwordErrorMessage:""})},"aria-labelledby":"form-dialog-title"},r.a.createElement(w.a,{container:!0,direction:"column",align:"center",justify:"center"},r.a.createElement(w.a,{item:!0,xs:12},r.a.createElement(O.a,{id:"form-dialog-title"},"Sign In")),r.a.createElement(w.a,{item:!0,xs:12},r.a.createElement(I.a,null,r.a.createElement(R.a,{style:{display:"flex",margin:"auto",justifyContent:"center",alignItems:"center"}},"You must already have an account to sign in. Please enter your email id and password. If you don't have an account, then sign up."),r.a.createElement(j.a,{autoFocus:!0,margin:"dense",id:"username-signin",label:"Username",type:"text",fullWidth:!0,error:this.state.emailError,helperText:this.state.emailErrorMessage,disabled:this.state.dialogLoading,onChange:function(t){return e.setState({signInEmail:t.target.value})}}),r.a.createElement(j.a,{margin:"dense",id:"password-signin",label:"Password",type:"password",fullWidth:!0,error:this.state.passwordError,helperText:this.state.passwordErrorMessage,disabled:this.state.dialogLoading,onChange:function(t){return e.setState({signInPassword:t.target.value})}})))),r.a.createElement(A.a,null,r.a.createElement(b.a,{onClick:function(){return e.setState({signInDialog:!1})},variant:"text",color:"default",style:{textTransform:"capitalize",fontSize:18,padding:10}},"Cancel"),this.state.dialogLoading?r.a.createElement(M.a,{color:"primary",size:24,variant:"indeterminate",style:{marginLeft:40,marginRight:40}}):r.a.createElement(b.a,{onClick:function(){return e.handleSignInClick()},variant:"contained",color:"primary",style:{textTransform:"capitalize",color:"white",fontSize:18,padding:10}},"Sign In"))),r.a.createElement(N.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.errorSnackbar,autoHideDuration:3e3,onClose:function(){return e.setState({errorSnackbar:!1})},message:r.a.createElement(v.a,{variant:"body1"},"An error occurred"),action:[r.a.createElement(B.a,{key:"close","aria-label":"closse",color:"default",onClick:function(){return e.setState({errorSnackbar:!1})}},r.a.createElement(z.a,{color:"#fff"}))]}),r.a.createElement(N.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.successSnackbar,autoHideDuration:3e3,onClose:function(){return e.setState({successSnackbar:!1})},message:r.a.createElement(v.a,{variant:"body1"},"Success!"),action:[r.a.createElement(B.a,{key:"close","aria-label":"closse",color:"default",onClick:function(){return e.setState({successSnackbar:!1})}},r.a.createElement(z.a,{color:"#fff"}))]})))}}]),t}(r.a.Component),Y=a(179),J=a(93),Z=a(189),$=a(178),K=a(180),V=a(181),X=a(182),q=a(21),Q=a.n(q),ee=a(120),te=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={loading:!0,mainMenu:null,userAvatar:null,userName:"",articles:null,tags:null},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleSignOutClick",value:function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({mainMenu:!1}),G.a.remove("userAuthenticated"),G.a.remove("userId"),this.props.history.replace("/");case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getArticlesForUser",value:function(){var e=Object(f.a)(p.a.mark((function e(t){var a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(_.a,"/article/forUser?id=").concat(t),console.log(a),e.next=4,fetch(a,{method:"GET"});case 4:return n=e.sent,e.next=7,n.json();case 7:return r=e.sent,console.log(r),this.setState({articles:r,tags:Object.keys(r)}),e.abrupt("return");case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUser",value:function(){var e=Object(f.a)(p.a.mark((function e(t){var a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),a="".concat(_.a,"/users?userId=").concat(t),e.next=4,fetch(a,{method:"GET"});case 4:return n=e.sent,e.next=7,n.json();case 7:return r=e.sent,console.log(r),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this,t=G.a.get("userId"),a=G.a.get("userAuthenticated");console.log(t),null!=a&&null!=t||this.props.history.replace("/"),this.getArticlesForUser(t).then((function(){return e.getUser(t)})).then((function(t){return e.setState({userAvatar:t.user.avatar,userName:t.user.name,loading:!1})})).catch((function(t){console.error(t),e.setState({loading:!1})}))}},{key:"render",value:function(){var e=this,t=Object(P.a)({palette:{primary:{main:"#673ab7"},secondary:{light:"#828282",main:"#000",contrastText:"#fff"}},typography:{fontFamily:"Nunito"}});return this.state.loading?r.a.createElement(ee.a,{open:this.state.loading},r.a.createElement(M.a,{color:"inherit"})):r.a.createElement(D.a,{theme:t},r.a.createElement("div",null,r.a.createElement(y.a,{position:"sticky",style:{backgroundColor:"white"}},r.a.createElement(E.a,{style:{paddingLeft:80,paddingRight:80}},r.a.createElement(v.a,{variant:"h5",style:{flex:1,color:"black"}},r.a.createElement($.a,{color:"inherit",onClick:function(){return e.props.history.push("/")}},"Reader")),r.a.createElement(b.a,{variant:"outlined",style:{paddingLeft:20,paddingRight:20,marginRight:40,textTransform:"capitalize"},color:"primary"},"Upgrade"),r.a.createElement(Y.a,{src:this.state.userAvatar,variant:"circle",style:{height:"40px",width:"40px",borderColor:"primary",borderWidth:2},onClick:function(t){return e.setState({mainMenu:t.currentTarget})}},r.a.createElement(Q.a,null)))),r.a.createElement("div",{style:{paddingLeft:80,paddingRight:80}},this.state.tags.map((function(t){return 0===e.state.articles[t].length?null:r.a.createElement("div",{style:{margin:20},key:t},r.a.createElement(v.a,{variant:"h4",style:{marginBottom:20}},t),r.a.createElement(K.a,{style:{flexWrap:"nowrap",transform:"translateZ(0)"},cols:5},e.state.articles[t].map((function(t){return r.a.createElement(V.a,{key:t.id,style:{height:"200px",width:"300px",margin:8,boxShadow:"0px 2px 3px 3px rgb(0,0,0,0.4)",paddding:0}},r.a.createElement("img",{src:t.image,onClick:function(){return e.props.history.push("/articles/".concat(t.id))}}),r.a.createElement(X.a,{title:t.title,style:{padding:4,background:"linear-gradient(to top, rgba(0,0,0,1) 10%, rgba(0,0,0,0.4) 70%, rgba(0,0,0,0) 100%)"},actionIcon:r.a.createElement(Y.a,{src:t.author.avatar}),subtitle:r.a.createElement($.a,{color:"inherit",onClick:function(){return e.props.history.push("/users/".concat(t.author.id))}},t.author.name)}))}))))})),r.a.createElement(J.a,{id:"main-menu",anchorEl:this.state.mainMenu,keepMounted:!0,open:Boolean(this.state.mainMenu),onClose:function(){return e.setState({mainMenu:!1})}},r.a.createElement(Z.a,null,r.a.createElement(w.a,{container:!0,direction:"row",spacing:4},r.a.createElement(w.a,{item:!0,container:!0,justify:"center",alignItems:"center"},r.a.createElement(Y.a,{src:this.state.userAvatar,variant:"circle",style:{height:"64px",width:"64px"}},r.a.createElement(Q.a,null))),r.a.createElement(w.a,{container:!0,item:!0,justify:"center",alignItems:"center"},r.a.createElement(v.a,{variant:"body1",align:"center",style:{fontSize:24}},r.a.createElement($.a,{color:"inherit",onClick:function(){return e.props.history.push("/editProfile")}},this.state.userName))))),r.a.createElement(Z.a,{onClick:function(){return e.props.history.push("/writeArticle")},style:{padding:16}},r.a.createElement(v.a,{variant:"body1",align:"center"},"New Article")),r.a.createElement(Z.a,{onClick:function(){return e.setState({mainMenu:!1})},style:{padding:16}},r.a.createElement(v.a,{variant:"body1",align:"center"},"Help")),r.a.createElement(Z.a,{onClick:function(){return e.handleSignOutClick()},style:{padding:16}},r.a.createElement(v.a,{variant:"body1",align:"center"},"Sign Out"))),r.a.createElement(U,null))))}}]),t}(r.a.Component),ae=a(53),ne=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).imageSelectHandler=function(e){console.log(e.target.files[0]),a.setState({compressing:!0,encodedImage:null});var t=a.state.reader;Object(ae.a)(e.target.files[0],{maxSizeMB:1}).then((function(e){console.log(e),t.addEventListener("loadend",(function(){console.log(t.result),a.setState({encodedImage:t.result})})),t.readAsDataURL(e)})).catch((function(e){console.error(e),a.setState({compressing:!1,encodedImage:a.state.userAvatar})}))},a.state={loading:!1,userName:"",userAbout:"",userAvatar:"",userNameError:!1,userNameErrorMessage:"",userAboutError:!1,userAboutErrorMessage:"",compressing:!1,reader:new FileReader,encodedImage:""},a.imageInput=null,a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"validateName",value:function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(/^[A-Za-z ]+$/.test(this.state.userName)){e.next=3;break}throw Error("ERR_NAME");case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"validateAbout",value:function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.userAbout){e.next=2;break}throw Error("ERR_ABOUT");case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setProfile",value:function(){var e=Object(f.a)(p.a.mark((function e(){var t,a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.a.get("userId");case 2:return t=e.sent,a=JSON.stringify({id:t,name:this.state.userName,about:this.state.userAbout,avatar:this.state.encodedImage}),console.log(a),e.next=7,fetch(_.a+"/users/update",{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json","Access-Control-Allow-Origin":"*"},body:a});case 7:return n=e.sent,e.next=10,n.json();case 10:if(r=e.sent,console.log(r),!r.error){e.next=14;break}throw Error("ERR_UPDATE");case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleProfileSubmit",value:function(){var e=this;console.log("Called handleProfileSubmit"),this.validateName().then((function(){return e.validateAbout()})).then((function(){return e.setProfile()})).then((function(){G.a.set("profileComplete",!0),e.props.history.replace("/dashboard")})).catch((function(e){console.error(e)}))}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=Object(P.a)({palette:{primary:{main:"#673ab7"},secondary:{light:"#828282",main:"#000",contrastText:"#fff"}},typography:{fontFamily:"Nunito"}});return r.a.createElement(D.a,{theme:t},r.a.createElement("div",null,r.a.createElement(y.a,{position:"sticky",style:{backgroundColor:"white"}},r.a.createElement(E.a,{style:{paddingLeft:80,paddingRight:80}},r.a.createElement(v.a,{variant:"h5",style:{flex:1,color:"#000"},onClick:function(){return e.props.history.push("/")}},"Reader"))),r.a.createElement("div",{style:{paddingLeft:300,paddingRight:300,paddingTop:80}},r.a.createElement(v.a,{variant:"h4",align:"center",style:{marginBottom:8}},"Your Profile"),r.a.createElement(v.a,{variant:"body1",align:"center",style:{marginTop:8}},"This is your profile. Make sure it looks nice."),r.a.createElement(C.a,{variant:"middle",style:{marginTop:64,marginBottom:64,height:4}}),r.a.createElement(w.a,{container:!0,direction:"row"},r.a.createElement(w.a,{container:!0,xs:6,item:!0,justify:"center",alignItems:"center",direction:"column"},r.a.createElement(j.a,{variant:"standard",onChange:function(t){return e.setState({userName:t.target.value,userNameChanged:!0})},error:this.state.userNameError,value:this.state.userName,label:"Name",placeholder:"Full Name",fullWidth:!0,style:{fontSize:26,padding:20,fontStyle:"bold"},inputProps:{style:{textAlign:"center",fontSize:24}}}),r.a.createElement(j.a,{variant:"standard",onChange:function(t){return e.setState({userAbout:t.target.value,userAboutChanged:!0})},error:this.state.userAboutError,value:this.state.userAbout,label:"About",placeholder:"Something about you",fullWidth:!0,multiline:!0,rowsMax:3,style:{padding:20,fontStyle:"bold",textAlign:"center"},inputProps:{style:{textAlign:"center"}}})),r.a.createElement(w.a,{container:!0,item:!0,xs:6,justify:"center",alignItems:"center",direction:"column"},r.a.createElement(Y.a,{src:this.state.encodedImage,variant:"circle",style:{height:"160px",width:"160px"},alt:this.state.userName},this.state.compressing?r.a.createElement(M.a,null):r.a.createElement(Q.a,null)),r.a.createElement(b.a,{variant:"outlined",color:"primary",onClick:function(){return e.imageInput.click()},style:{marginTop:40,paddingLeft:40,paddingRight:40,textTransform:"capitalize"}},r.a.createElement(v.a,{variant:"h6",align:"center"},"Select Picture")),r.a.createElement("input",{style:{display:"none"},type:"file",onChange:this.imageSelectHandler,ref:function(t){return e.imageInput=t}}))),r.a.createElement(C.a,{variant:"middle",style:{marginTop:64,marginBottom:64,height:4}}),r.a.createElement(v.a,{align:"center"},r.a.createElement(b.a,{variant:"contained",size:"large",align:"center",color:"primary",onClick:function(){return e.handleProfileSubmit()},style:{paddingLeft:80,paddingRight:80}},"Submit"))),r.a.createElement(U,null)))}}]),t}(r.a.Component),re=a(174),ie=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).imageSelectHandler=function(e){console.log(e.target.files[0]),ae.a.getDataUrlFromFile(e.target.files[0]).then((function(e){a.setState({encodedImage:e}),console.log(e)}))},a.state={loading:!0,mainMenu:null,userName:null,userAvatar:null,articleMenu:null,tagDialog:!1,publishing:!1,title:"",body:"",tags:[{word:"Entertainment",selected:!1},{word:"Faishon",selected:!1},{word:"Finance",selected:!1},{word:"Fitness",selected:!1},{word:"Relationship",selected:!1},{word:"Technology",selected:!1}],selectedIndex:null,encodedImage:"",blobImage:null},a.imageInput=null,a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"validateTitle",value:function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=this.state.title.length){e.next=2;break}throw Error("ERR_NULL_TITLE");case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"validateBody",value:function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=this.state.body.length){e.next=2;break}throw Error("ERR_NULL_BODY");case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"validateTag",value:function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=this.state.selectedTag){e.next=2;break}throw Error("ERR_NO_SELECTION");case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"publishArticle",value:function(){var e=Object(f.a)(p.a.mark((function e(){var t,a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=G.a.get("userId"),a=JSON.stringify({userId:t,articleTitle:this.state.title,articleBody:this.state.body,articleTag:this.state.tags[this.state.selectedIndex].word.toLowerCase(),articleImage:this.state.encodedImage}),console.log(a),e.next=5,fetch(_.a+"/article/new",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","Access-Control-Allow-Origin":"*"},body:a});case 5:return n=e.sent,e.next=8,n.json();case 8:return r=e.sent,console.log(r),e.abrupt("return",r.newBlogId);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handlePublishArticle",value:function(){var e=this;this.setState({publishing:!0}),this.validateTitle().then((function(){return e.validateBody()})).then((function(){return e.publishArticle()})).then((function(t){e.setState({publishing:!1}),e.props.history.replace("/articles/".concat(t))})).catch((function(t){console.error(t),e.setState({publishing:!1})}))}},{key:"handleTagClick",value:function(e){this.state.tags[e].selected?(this.state.tags[e].selected=!1,this.setState({selectedIndex:null})):null!=this.state.selectedIndex?(this.state.tags[this.state.selectedIndex].selected=!1,this.state.tags[e].selected=!0,this.setState({selectedIndex:e})):(this.state.tags[e].selected=!0,this.setState({selectedIndex:e})),this.forceUpdate()}},{key:"getUser",value:function(){var e=Object(f.a)(p.a.mark((function e(t){var a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),a="".concat(_.a,"/users?userId=").concat(t),e.next=4,fetch(a,{method:"GET"});case 4:return n=e.sent,e.next=7,n.json();case 7:return r=e.sent,console.log(r),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this,t=G.a.get("userId");this.getUser(t).then((function(t){return e.setState({userAvatar:t.user.avatar,userName:t.user.name,loading:!1})}))}},{key:"render",value:function(){var e=this,t=Object(P.a)({palette:{primary:{main:"#673ab7"},secondary:{light:"#828282",main:"#000",contrastText:"#fff"}},typography:{fontFamily:"Nunito"}});return this.state.loading?r.a.createElement(ee.a,{open:this.state.loading},r.a.createElement(M.a,{color:"default"})):r.a.createElement(D.a,{theme:t},r.a.createElement("div",null,r.a.createElement(y.a,{position:"sticky",style:{backgroundColor:"white"}},r.a.createElement(E.a,{style:{paddingLeft:80,paddingRight:80}},r.a.createElement(v.a,{variant:"h5",style:{flex:1,color:"black"}},r.a.createElement($.a,{color:"inherit",onClick:function(){return e.props.history.push("/")}},"Reader")),r.a.createElement(b.a,{variant:"contained",color:"primary",style:{paddingLeft:40,paddingRight:40,marginRight:40,textTransform:"capitalize"},onClick:function(){return e.setState({tagDialog:!0})}},r.a.createElement(v.a,{align:"center",variant:"h6"},"Publish")),r.a.createElement(Y.a,{src:this.state.userAvatar,variant:"circle",style:{height:"40px",width:"40px"},onClick:function(t){return e.setState({mainMenu:t.currentTarget})}}))),r.a.createElement(J.a,{id:"main-menu",anchorEl:this.state.mainMenu,keepMounted:!0,open:Boolean(this.state.mainMenu),onClose:function(){return e.setState({mainMenu:!1})}},r.a.createElement(Z.a,null,r.a.createElement(w.a,{container:!0,direction:"row",spacing:4},r.a.createElement(w.a,{item:!0,container:!0,justify:"center",alignItems:"center"},r.a.createElement(Y.a,{src:this.state.userAvatar,variant:"circle",style:{height:"64px",width:"64px"}},r.a.createElement(Q.a,null))),r.a.createElement(w.a,{container:!0,item:!0,justify:"center",alignItems:"center"},r.a.createElement(v.a,{variant:"body1",align:"center",style:{fontSize:24}},r.a.createElement($.a,{color:"inherit",onClick:function(){return e.props.history.push("/editProfile")}},this.state.userName))))),r.a.createElement(Z.a,{onClick:function(){return e.props.history.push("/")},style:{padding:16}},r.a.createElement(v.a,{variant:"body1",align:"center"},"Dashboard")),r.a.createElement(Z.a,{onClick:function(){return e.setState({mainMenu:!1})},style:{padding:16}},r.a.createElement(v.a,{variant:"body1",align:"center"},"Help")),r.a.createElement(Z.a,{onClick:function(){return e.setState({mainMenu:!1})},style:{padding:16}},r.a.createElement(v.a,{variant:"body1",align:"center"},"Sign Out"))),r.a.createElement("input",{style:{display:"none"},type:"file",onChange:this.imageSelectHandler,ref:function(t){return e.imageInput=t}}),""==this.state.encodedImage?r.a.createElement("div",{style:{alignItems:"center",justifyContent:"center",marginTop:40}},r.a.createElement(v.a,{variant:"h6",align:"center"},"No cover image selected"),r.a.createElement(v.a,{variant:"body1",align:"center"},"Here you can preview the cover image for your article. This will be displayed on the dashboard of other users."),r.a.createElement(v.a,{align:"center"},r.a.createElement(b.a,{variant:"outlined",color:"primary",style:{marginTop:20,marginBottom:20},onClick:function(){return e.imageInput.click()}},"Select Image"))):r.a.createElement("div",{style:{alignItems:"center",justifyContent:"center",display:"flex",marginTop:40}},r.a.createElement("img",{src:this.state.encodedImage,style:{objectFit:"cover",width:"40%",height:"auto"}})),r.a.createElement("div",{style:{marginLeft:240,marginRight:240,paddingTop:40}},r.a.createElement(re.a,{placeholder:"Title",style:{fontSize:32,marginTop:80,marginBottom:20},fullWidth:!0,multiline:!0,rowsMax:3,onChange:function(t){return e.setState({title:t.target.value})}}),r.a.createElement(re.a,{placeholder:"Write your article",style:{fontSize:18,marginTop:20,marginBottom:20},fullWidth:!0,multiline:!0,onChange:function(t){return e.setState({body:t.target.value})}})),r.a.createElement(T.a,{open:this.state.tagDialog,onBackdropClick:function(e){return console.log("Backdrop Clicked")},onClose:function(){return e.setState({tagDialog:!1})},onExited:function(){return e.setState({publishing:!1})},"aria-labelledby":"form-dialog-title",style:{padding:40}},r.a.createElement(v.a,{variant:"h5",align:"center",style:{margin:20}},"One Last Thing"),r.a.createElement(v.a,{variant:"body1",align:"center",style:{margin:20}},"You have almost completed your article. Just one last thing. Select a category that makes it easier for readers to find you article on Reader. Think it as a #hashtag."),r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexWrap:"wrap"}},this.state.tags.map((function(t,a){return r.a.createElement(k.a,{key:a,clickable:!0,color:e.state.tags[a].selected?"primary":"secondary",icon:r.a.createElement(S.a,null),label:r.a.createElement(v.a,{variant:"body1"},t.word),style:{margin:8,padding:16},onClick:function(){return e.handleTagClick(a)}})}))),r.a.createElement(A.a,null,r.a.createElement(b.a,{onClick:function(){return e.setState({tagDialog:!1})},variant:"text",color:"default",style:{textTransform:"capitalize",fontSize:18}},"Cancel"),this.state.publishing?r.a.createElement(M.a,{color:"primary",size:24,variant:"indeterminate",style:{marginLeft:40,marginRight:40}}):r.a.createElement(b.a,{onClick:function(){return e.handlePublishArticle()},variant:"contained",color:"primary",style:{textTransform:"capitalize",color:"white",fontSize:18,padding:10}},"Publish"))),r.a.createElement(U,null)))}}]),t}(r.a.Component),oe=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={loading:!0,mainMenu:null,userAvatar:"",userName:"",articleBody:"",articleImage:"",articleLikes:null,articleReads:null,articleTitle:"",authorAbout:"",authorAvatar:null,authorName:"",error:!1,errorMessage:"ERR_NONE"},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"getArticle",value:function(){var e=Object(f.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.articleId,e.next=3,fetch(_.a+"/article?articleId=".concat(t),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json","Access-Control-Allow-Origin":"*"}});case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,console.log(n),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUser",value:function(){var e=Object(f.a)(p.a.mark((function e(t){var a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),a="".concat(_.a,"/users?userId=").concat(t),e.next=4,fetch(a,{method:"GET"});case 4:return n=e.sent,e.next=7,n.json();case 7:return r=e.sent,console.log(r),this.setState({userAvatar:r.user.avatar?r.user.avatar:"",userName:r.user.name}),e.abrupt("return");case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this,t=G.a.get("userId");this.getUser(t).then((function(){return e.getArticle()})).then((function(t){var a=t.articleBody,n=t.articleImage,r=t.articleLikes,i=t.articleReads,o=t.articleTitle,s=t.author,l=s.authorName,c=s.authorAbout,u=s.authorAvatar;e.setState({articleTitle:o,articleImage:n,articleBody:a,articleLikes:r,articleReads:i,authorName:l,authorAbout:c,authorAvatar:u,loading:!1}),console.log(e.state)})).catch((function(t){console.error(t),e.setState({loading:!1})}))}},{key:"render",value:function(){var e=this,t=Object(P.a)({palette:{primary:{main:"#673ab7"},secondary:{light:"#828282",main:"#000",contrastText:"#fff"}},typography:{fontFamily:"Nunito"}});return this.state.loading?r.a.createElement(ee.a,{open:this.state.loading},r.a.createElement(M.a,{color:"#fff"})):r.a.createElement(D.a,{theme:t},r.a.createElement("div",null,r.a.createElement(y.a,{position:"sticky",style:{backgroundColor:"white"}},r.a.createElement(E.a,{style:{paddingLeft:80,paddingRight:80}},r.a.createElement(v.a,{variant:"h5",style:{flex:1,color:"black"}},r.a.createElement($.a,{color:"default",onClick:function(){return e.props.history.push("/")}},"Reader")),r.a.createElement(b.a,{variant:"outlined",style:{paddingLeft:20,paddingRight:20,marginRight:40,textTransform:"capitalize"},color:"primary"},"Upgrade"),r.a.createElement(Y.a,{src:this.state.userAvatar,variant:"circle",style:{height:"40px",width:"40px"},onClick:function(t){return e.setState({mainMenu:t.currentTarget})}},r.a.createElement(Q.a,{color:"black"})))),r.a.createElement(J.a,{id:"main-menu",anchorEl:this.state.mainMenu,keepMounted:!0,open:Boolean(this.state.mainMenu),onClose:function(){return e.setState({mainMenu:!1})}},r.a.createElement(Z.a,null,r.a.createElement(w.a,{container:!0,direction:"row",spacing:4},r.a.createElement(w.a,{item:!0,container:!0,justify:"center",alignItems:"center"},r.a.createElement(Y.a,{src:this.state.userAvatar,variant:"circle",style:{height:"64px",width:"64px"}},r.a.createElement(Q.a,null))),r.a.createElement(w.a,{container:!0,item:!0,justify:"center",alignItems:"center"},r.a.createElement(v.a,{variant:"body1",align:"center",style:{fontSize:24}},r.a.createElement($.a,{color:"inherit",onClick:function(){return e.props.history.push("/editProfile")}},this.state.userName))))),r.a.createElement(Z.a,{onClick:function(){e.setState({mainMenu:!1}),e.props.history.replace("/dashboard")},style:{padding:16}},"Dashboard"),r.a.createElement(Z.a,{onClick:function(){return e.setState({mainMenu:!1})},style:{padding:16}},"Help"),r.a.createElement(Z.a,{onClick:function(){return e.setState({mainMenu:!1})},style:{padding:16}},"Sign Out")),r.a.createElement("div",{style:{marginLeft:300,marginRight:300,paddingTop:100,paddingBottom:100}},r.a.createElement(v.a,{variant:"h2",style:{marginBottom:40}},this.state.articleTitle),r.a.createElement(w.a,{container:!0,direction:"row",spacing:4,style:{marginTop:16,marginBottom:16}},r.a.createElement(w.a,{item:!0},r.a.createElement(Y.a,{src:this.state.authorAvatar,variant:"circle",style:{height:"72px",width:"72px"}},this.state.authorName)),r.a.createElement(w.a,{item:!0,direction:"column"},r.a.createElement(v.a,{variant:"h5",style:{marginTop:8,marginBottom:8}},this.state.authorName),r.a.createElement(v.a,{variant:"body1",style:{marginTop:8,marginBottom:8}},this.state.authorAbout))),r.a.createElement("img",{src:this.state.articleImage,style:{objectFit:"cover",width:"100%",height:"auto"}}),this.state.articleBody.split("\n").map((function(e,t){return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(v.a,{key:t},e))})))))}}]),t}(r.a.Component),se=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).imageSelectHandler=function(e){console.log(e.target.files[0]),a.setState({compressing:!0,encodedImage:null});var t=a.state.reader;Object(ae.a)(e.target.files[0],{maxSizeMB:1}).then((function(e){console.log(e),t.addEventListener("loadend",(function(){console.log(t.result),a.setState({encodedImage:t.result,userAvatarChanged:!0,compressing:!1})})),t.readAsDataURL(e)})).catch((function(e){console.error(e),a.setState({compressing:!1,encodedImage:a.state.userAvatar})}))},a.state={loading:!1,disabled:!0,userName:"",userAbout:"",userAvatar:"",userNameChanged:!1,userAboutChanged:!1,userAvatarChanged:!1,userNameError:!1,userNameErrorMessage:"",userAboutError:!1,userAboutErrorMessage:"",compressing:!1,reader:new FileReader,encodedImage:""},a.imageInput=null,a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"getUser",value:function(){var e=Object(f.a)(p.a.mark((function e(t){var a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(_.a,"/users?userId=").concat(t),e.next=3,fetch(a,{method:"GET"});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"validateName",value:function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(/^[A-Za-z ]+$/.test(this.state.userName)){e.next=3;break}throw Error("ERR_NAME");case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"validateAbout",value:function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.userAbout){e.next=2;break}throw Error("ERR_ABOUT");case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateProfile",value:function(){var e=Object(f.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=G.a.get("userId"),console.log(t),e.next=4,fetch(_.a+"/users/update",{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({id:t,name:this.state.userName,about:this.state.userAbout,avatar:this.state.userAvatarChanged?this.state.encodedImage:null})});case 4:return a=e.sent,e.next=7,a.json();case 7:if(n=e.sent,console.log(n),!n.error){e.next=11;break}throw Error("ERR_UPDATE");case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleProfileSubmit",value:function(){var e=this;this.setState({loading:!0}),this.validateName().then((function(){return e.validateAbout()})).then((function(){return e.updateProfile()})).then((function(t){console.log(t),e.props.history.goBack()})).catch((function(t){console.error(t),e.setState({loading:!1})}))}},{key:"componentDidMount",value:function(){var e=this,t=G.a.get("userId");this.getUser(t).then((function(t){console.log(t);var a=t.user,n=a.name,r=a.about,i=a.avatar;e.setState({userName:n,userAvatar:i,encodedImage:i,userAbout:r})})).catch((function(e){console.error(e)}))}},{key:"render",value:function(){var e=this,t=Object(P.a)({palette:{primary:{main:"#673ab7"},secondary:{light:"#828282",main:"#000",contrastText:"#fff"}},typography:{fontFamily:"Nunito"}});return r.a.createElement(D.a,{theme:t},r.a.createElement("div",null,r.a.createElement(y.a,{position:"sticky",style:{backgroundColor:"white"}},r.a.createElement(E.a,{style:{paddingLeft:80,paddingRight:80}},r.a.createElement(v.a,{variant:"h5",style:{flex:1,color:"black"},onClick:function(){return e.props.history.push("/dashboard")}},r.a.createElement($.a,{color:"default",onClick:function(){return e.props.history.push("/")}},"Reader")),r.a.createElement(b.a,{variant:"outlined",style:{paddingLeft:20,paddingRight:20,marginRight:40,textTransform:"capitalize"},color:"primary"},"Upgrade"),r.a.createElement(Y.a,{src:this.state.userAvatar,variant:"circle",style:{height:"40px",width:"40px"},onClick:function(t){return e.setState({mainMenu:t.currentTarget})}},r.a.createElement(Q.a,{color:"#000"})))),r.a.createElement(J.a,{id:"main-menu",anchorEl:this.state.mainMenu,keepMounted:!0,open:Boolean(this.state.mainMenu),onClose:function(){return e.setState({mainMenu:!1})}},r.a.createElement(Z.a,null,r.a.createElement(w.a,{container:!0,direction:"row",spacing:4},r.a.createElement(w.a,{item:!0,container:!0,justify:"center",alignItems:"center"},r.a.createElement(Y.a,{src:this.state.userAvatar,variant:"circle",style:{height:"64px",width:"64px"}},r.a.createElement(Q.a,null))),r.a.createElement(w.a,{container:!0,item:!0,justify:"center",alignItems:"center"},r.a.createElement(v.a,{variant:"body1",align:"center",style:{fontSize:24}},r.a.createElement($.a,{color:"inherit",onClick:function(){return e.props.history.push("/editProfile")}},this.state.userName))))),r.a.createElement(Z.a,{onClick:function(){return e.props.history.push("/dashboard")},style:{padding:16}},r.a.createElement(v.a,{variant:"body1",align:"center"},"Dashboard")),r.a.createElement(Z.a,{onClick:function(){return e.props.history.push("/writeArticle")},style:{padding:16}},r.a.createElement(v.a,{variant:"body1",align:"center"},"New Article")),r.a.createElement(Z.a,{onClick:function(){return e.setState({mainMenu:!1})},style:{padding:16}},r.a.createElement(v.a,{variant:"body1",align:"center"},"Help")),r.a.createElement(Z.a,{onClick:function(){return e.handleSignOutClick()},style:{padding:16}},r.a.createElement(v.a,{variant:"body1",align:"center"},"Sign Out"))),r.a.createElement("div",{style:{paddingLeft:300,paddingRight:300,paddingTop:80}},r.a.createElement(v.a,{variant:"h4",align:"center",style:{marginBottom:8}},"Your Profile"),r.a.createElement(v.a,{variant:"body1",align:"center",style:{marginTop:8}},"Update your profile"),r.a.createElement(C.a,{variant:"middle",style:{marginTop:64,marginBottom:64,height:4}}),r.a.createElement(v.a,{align:"center"},r.a.createElement(b.a,{variant:"outlined",style:{marginBottom:40,textTransform:"capitalize",paddingLeft:40,paddingRight:40},color:"primary",onClick:function(){return e.setState({disabled:!1})}},r.a.createElement(v.a,{variant:"h6",align:"center"},"Edit Profile"))),r.a.createElement(w.a,{container:!0,direction:"row"},r.a.createElement(w.a,{container:!0,xs:6,item:!0,justify:"center",alignItems:"center",direction:"column"},r.a.createElement(j.a,{variant:"standard",onChange:function(t){return e.setState({userName:t.target.value,userNameChanged:!0})},error:this.state.userNameError,value:this.state.userName,label:"Name",placeholder:"Full Name",fullWidth:!0,style:{fontSize:26,padding:20,fontStyle:"bold"},inputProps:{style:{textAlign:"center",fontSize:24}},disabled:this.state.disabled}),r.a.createElement(j.a,{variant:"standard",onChange:function(t){return e.setState({userAbout:t.target.value,userAboutChanged:!0})},error:this.state.userAboutError,value:this.state.userAbout,label:"About",placeholder:"Something about you",fullWidth:!0,multiline:!0,rowsMax:3,style:{padding:20,fontStyle:"bold",textAlign:"center"},inputProps:{style:{textAlign:"center"}},disabled:this.state.disabled})),r.a.createElement(w.a,{container:!0,item:!0,xs:6,justify:"center",alignItems:"center",direction:"column"},r.a.createElement(Y.a,{src:this.state.encodedImage,variant:"circle",style:{height:"160px",width:"160px"},alt:this.state.userName},this.state.compressing?r.a.createElement(M.a,null):r.a.createElement(Q.a,null)),r.a.createElement(b.a,{variant:"outlined",color:"primary",onClick:function(){return e.imageInput.click()},style:{marginTop:40,paddingLeft:40,paddingRight:40,textTransform:"capitalize"},disabled:this.state.disabled},r.a.createElement(v.a,{variant:"h6",align:"center"},"Select Picture")),r.a.createElement("input",{style:{display:"none"},type:"file",onChange:this.imageSelectHandler,ref:function(t){return e.imageInput=t}}))),r.a.createElement(C.a,{variant:"middle",style:{marginTop:64,marginBottom:64,height:4}}),r.a.createElement(v.a,{align:"center"},r.a.createElement(b.a,{variant:"contained",size:"large",align:"center",color:"primary",onClick:function(){return e.handleProfileSubmit()},style:{paddingLeft:80,paddingRight:80},disabled:this.state.disabled},"Submit"))),r.a.createElement(U,null),r.a.createElement(ee.a,{open:this.state.loading},r.a.createElement(M.a,{color:"#fff"}))))}}]),t}(r.a.Component),le=a(183),ce=a(184),ue=a(186),de=a(185),me=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={mainMenu:!1,loading:!0,userAvatar:null,userName:null,author:null,articles:null},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"getUser",value:function(){var e=Object(f.a)(p.a.mark((function e(t){var a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(_.a,"/users?userId=").concat(t),e.next=3,fetch(a,{method:"GET"});case 3:return n=e.sent,e.next=6,n.json();case 6:r=e.sent,this.setState({userName:r.user.name,userAvatar:r.user.avatar});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAuthorData",value:function(){var e=Object(f.a)(p.a.mark((function e(){var t,a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.userId,a="".concat(_.a,"/users?userId=").concat(t),e.next=4,fetch(a,{method:"GET"});case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,this.setState({author:r.user});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getWrittenArticles",value:function(){var e=Object(f.a)(p.a.mark((function e(){var t,a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.userId,a="".concat(_.a,"/users/writtenArticles?userId=").concat(t),e.next=4,fetch(a,{method:"GET"});case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,this.setState({articles:r.articles});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleSignOutClick",value:function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({mainMenu:!1}),G.a.remove("userAuthenticated"),G.a.remove("userId"),this.props.history.replace("/");case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this,t=G.a.get("userId");this.getUser(t).then((function(){return e.getWrittenArticles()})).then((function(){return e.getAuthorData()})).then((function(){e.setState({loading:!1}),console.log(e.state)})).catch((function(t){console.error(t),console.log(e.state),e.setState({loading:!1})}))}},{key:"render",value:function(){var e=this,t=Object(P.a)({alette:{primary:{main:"#673ab7"},secondary:{light:"#828282",main:"#000",contrastText:"#fff"}},typography:{fontFamily:"Nunito"}});return this.state.loading?r.a.createElement(ee.a,{open:this.state.loading},r.a.createElement(M.a,{color:"inherit"})):r.a.createElement(D.a,{theme:t},r.a.createElement("div",null,r.a.createElement(y.a,{position:"sticky",style:{backgroundColor:"white"}},r.a.createElement(E.a,{style:{paddingLeft:80,paddingRight:80}},r.a.createElement(v.a,{variant:"h5",style:{flex:1,color:"black"}},r.a.createElement($.a,{color:"inherit",onClick:function(){return e.props.history.push("/")}},"Reader")),r.a.createElement(b.a,{variant:"outlined",style:{paddingLeft:20,paddingRight:20,marginRight:40,textTransform:"capitalize"},color:"primary"},"Upgrade"),r.a.createElement(Y.a,{src:this.state.userAvatar,variant:"circle",style:{height:"40px",width:"40px",borderColor:"primary",borderWidth:2},onClick:function(t){return e.setState({mainMenu:t.currentTarget})}},r.a.createElement(Q.a,null)))),r.a.createElement("div",{style:{marginLeft:300,marginRight:300,paddingTop:80,paddingBottom:80}},r.a.createElement(w.a,{container:!0,direction:"row",spacing:0},r.a.createElement(w.a,{container:!0,item:!0,xs:6,justify:"center"},r.a.createElement(Y.a,{src:this.state.author.avatar,style:{height:"160px",width:"160px"},variant:"circle",alt:this.state.author.name,onClick:function(t){return e.setState({mainMenu:t.currentTarget})}})),r.a.createElement(w.a,{container:!0,item:!0,xs:6,direction:"column",style:{paddingTop:40}},r.a.createElement(v.a,{variant:"h4",color:"inherit",style:{marginBottom:8}},this.state.author.name),r.a.createElement(v.a,{variant:"body1",color:"inherit",style:{marginTop:8}},this.state.author.about))),r.a.createElement(v.a,{variant:"h6",color:"inherit",align:"center",style:{marginTop:20,marginBottom:20}},"Articles"),r.a.createElement(w.a,{container:!0,direction:"row",style:{marginTop:20}},this.state.articles.map((function(e){return r.a.createElement(w.a,{item:!0,md:12,justify:"center",style:{padding:40,margin:16}},r.a.createElement(le.a,{style:{maxWidth:"100%"}},r.a.createElement(ce.a,null,r.a.createElement(de.a,{component:"img",src:e.image,alt:e.title,title:e.title,height:"60%",width:"100%"}),r.a.createElement(ue.a,null,r.a.createElement(v.a,{variant:"h5"},e.title),r.a.createElement(v.a,{variant:"body1"},e.body)))))})))),r.a.createElement("div",{style:{width:"100%",justifyContent:"center"}})),r.a.createElement(J.a,{id:"main-menu",anchorEl:this.state.mainMenu,keepMounted:!0,open:Boolean(this.state.mainMenu),onClose:function(){return e.setState({mainMenu:!1})}},r.a.createElement(Z.a,null,r.a.createElement(w.a,{container:!0,direction:"row",spacing:4},r.a.createElement(w.a,{item:!0,container:!0,justify:"center",alignItems:"center"},r.a.createElement(Y.a,{src:this.state.userAvatar,variant:"circle",style:{height:"64px",width:"64px"}},r.a.createElement(Q.a,null))),r.a.createElement(w.a,{container:!0,item:!0,justify:"center",alignItems:"center"},r.a.createElement(v.a,{variant:"body1",align:"center",style:{fontSize:24}},r.a.createElement($.a,{color:"inherit",onClick:function(){return e.props.history.push("/editProfile")}},this.state.userName))))),r.a.createElement(Z.a,{onClick:function(){return e.props.history.push("/dasboard")},style:{padding:16}},r.a.createElement(v.a,{variant:"body1",align:"center"},"Dashboard")),r.a.createElement(Z.a,{onClick:function(){return e.props.history.push("/writeArticle")},style:{padding:16}},r.a.createElement(v.a,{variant:"body1",align:"center"},"New Article")),r.a.createElement(Z.a,{onClick:function(){return e.setState({mainMenu:!1})},style:{padding:16}},r.a.createElement(v.a,{variant:"body1",align:"center"},"Help")),r.a.createElement(Z.a,{onClick:function(){return e.handleSignOutClick()},style:{padding:16}},r.a.createElement(v.a,{variant:"body1",align:"center"},"Sign Out"))))}}]),t}(r.a.Component),ge=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(m.a,null,r.a.createElement(g.c,null,r.a.createElement(g.a,{path:"/dashboard",component:te}),r.a.createElement(g.a,{path:"/editProfile",component:se}),r.a.createElement(g.a,{path:"/profile",component:ne}),r.a.createElement(g.a,{path:"/writeArticle",component:ie}),r.a.createElement(g.a,{path:"/articles/:articleId",component:oe}),r.a.createElement(g.a,{path:"/users/:userId",component:me}),r.a.createElement(g.a,{path:"/",component:H})))}}]),t}(r.a.PureComponent);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(ge,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},15:function(e,t){e.exports="http://localhost:3001"}},[[106,1,2]]]);
//# sourceMappingURL=main.67bfbc5b.chunk.js.map